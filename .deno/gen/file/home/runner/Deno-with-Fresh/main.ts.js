/// <reference no-default-lib="true" />
/// <reference lib="dom" />
/// <reference lib="dom.asynciterable" />
/// <reference lib="deno.ns" />
/// <reference lib="deno.unstable" />
import { start } from "$fresh/server.ts";
import manifest from "./fresh.gen.ts";
import { config, setup } from "@twind";
import { virtualSheet } from "twind/sheets";
const sheet = virtualSheet();
sheet.reset();
setup({
    ...config,
    sheet
});
function render(ctx, render1) {
    const snapshot = ctx.state.get("twind");
    sheet.reset(snapshot || undefined);
    render1();
    ctx.styles.splice(0, ctx.styles.length, ...sheet.target);
    const newSnapshot = sheet.reset();
    ctx.state.set("twind", newSnapshot);
}
await start(manifest, {
    render
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vaG9tZS9ydW5uZXIvRGVuby13aXRoLUZyZXNoL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2Ugbm8tZGVmYXVsdC1saWI9XCJ0cnVlXCIgLz5cbi8vLyA8cmVmZXJlbmNlIGxpYj1cImRvbVwiIC8+XG4vLy8gPHJlZmVyZW5jZSBsaWI9XCJkb20uYXN5bmNpdGVyYWJsZVwiIC8+XG4vLy8gPHJlZmVyZW5jZSBsaWI9XCJkZW5vLm5zXCIgLz5cbi8vLyA8cmVmZXJlbmNlIGxpYj1cImRlbm8udW5zdGFibGVcIiAvPlxuXG5pbXBvcnQgeyBJbm5lclJlbmRlckZ1bmN0aW9uLCBSZW5kZXJDb250ZXh0LCBzdGFydCB9IGZyb20gXCIkZnJlc2gvc2VydmVyLnRzXCI7XG5pbXBvcnQgbWFuaWZlc3QgZnJvbSBcIi4vZnJlc2guZ2VuLnRzXCI7XG5cbmltcG9ydCB7IGNvbmZpZywgc2V0dXAgfSBmcm9tIFwiQHR3aW5kXCI7XG5pbXBvcnQgeyB2aXJ0dWFsU2hlZXQgfSBmcm9tIFwidHdpbmQvc2hlZXRzXCI7XG5cbmNvbnN0IHNoZWV0ID0gdmlydHVhbFNoZWV0KCk7XG5zaGVldC5yZXNldCgpO1xuc2V0dXAoeyAuLi5jb25maWcsIHNoZWV0IH0pO1xuXG5mdW5jdGlvbiByZW5kZXIoY3R4OiBSZW5kZXJDb250ZXh0LCByZW5kZXI6IElubmVyUmVuZGVyRnVuY3Rpb24pIHtcbiAgY29uc3Qgc25hcHNob3QgPSBjdHguc3RhdGUuZ2V0KFwidHdpbmRcIikgYXMgdW5rbm93bltdIHwgbnVsbDtcbiAgc2hlZXQucmVzZXQoc25hcHNob3QgfHwgdW5kZWZpbmVkKTtcbiAgcmVuZGVyKCk7XG4gIGN0eC5zdHlsZXMuc3BsaWNlKDAsIGN0eC5zdHlsZXMubGVuZ3RoLCAuLi4oc2hlZXQpLnRhcmdldCk7XG4gIGNvbnN0IG5ld1NuYXBzaG90ID0gc2hlZXQucmVzZXQoKTtcbiAgY3R4LnN0YXRlLnNldChcInR3aW5kXCIsIG5ld1NuYXBzaG90KTtcbn1cblxuYXdhaXQgc3RhcnQobWFuaWZlc3QsIHsgcmVuZGVyIH0pO1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHVDQUF1QztBQUN2QywyQkFBMkI7QUFDM0IseUNBQXlDO0FBQ3pDLCtCQUErQjtBQUMvQixxQ0FBcUM7QUFFckMsU0FBNkMsS0FBSyxRQUFRLGtCQUFrQixDQUFDO0FBQzdFLE9BQU8sUUFBUSxNQUFNLGdCQUFnQixDQUFDO0FBRXRDLFNBQVMsTUFBTSxFQUFFLEtBQUssUUFBUSxRQUFRLENBQUM7QUFDdkMsU0FBUyxZQUFZLFFBQVEsY0FBYyxDQUFDO0FBRTVDLE1BQU0sS0FBSyxHQUFHLFlBQVksRUFBRSxBQUFDO0FBQzdCLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUNkLEtBQUssQ0FBQztJQUFFLEdBQUcsTUFBTTtJQUFFLEtBQUs7Q0FBRSxDQUFDLENBQUM7QUFFNUIsU0FBUyxNQUFNLENBQUMsR0FBa0IsRUFBRSxPQUEyQixFQUFFO0lBQy9ELE1BQU0sUUFBUSxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxBQUFvQixBQUFDO0lBQzVELEtBQUssQ0FBQyxLQUFLLENBQUMsUUFBUSxJQUFJLFNBQVMsQ0FBQyxDQUFDO0lBQ25DLE9BQU0sRUFBRSxDQUFDO0lBQ1QsR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxLQUFLLEFBQUMsS0FBSyxDQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzNELE1BQU0sV0FBVyxHQUFHLEtBQUssQ0FBQyxLQUFLLEVBQUUsQUFBQztJQUNsQyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsV0FBVyxDQUFDLENBQUM7Q0FDckM7QUFFRCxNQUFNLEtBQUssQ0FBQyxRQUFRLEVBQUU7SUFBRSxNQUFNO0NBQUUsQ0FBQyxDQUFDIn0=